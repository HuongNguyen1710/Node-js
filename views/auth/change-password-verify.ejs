<h3 class="mb-3">Xác thực đổi mật khẩu</h3>
<p>
  Mã OTP đã được gửi tới email của bạn.
  Mã có hiệu lực trong <span id="otp-countdown">60</span> giây.
</p>

<% if (typeof error !== "undefined" && error) { %>
  <div class="alert alert-danger"><%= error %></div>
<% } %>

<form method="post" action="/auth/change-password/verify" class="col-md-4" id="otp-change-form">
  <div class="mb-3">
    <label class="form-label">Mã OTP (6 số)</label>
    <input type="text" name="otp" class="form-control" maxlength="6" required>
  </div>
  <button type="submit" class="btn btn-success" id="otp-change-submit">
    Xác nhận đổi mật khẩu
  </button>
</form>

<script>
  (function () {
    var seconds = 60;
    var span = document.getElementById("otp-countdown");
    var btn = document.getElementById("otp-change-submit");

    var timer = setInterval(function () {
      seconds--;
      if (span) span.textContent = seconds;

      if (seconds <= 0) {
        clearInterval(timer);
        if (span) span.textContent = "0";
        if (btn) {
          btn.disabled = true;
          btn.textContent = "Mã OTP đã hết hạn";
        }
      }
    }, 1000);
  })();
</script>

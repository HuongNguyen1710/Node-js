<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>
    <%= typeof title !== "undefined" ? title + " - HuongHan Store" : "HuongHan Store" %>
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap + Icons -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    rel="stylesheet"
  />

  <link rel="stylesheet" href="/css/style.css" />

  <!-- Sticky footer layout -->
  <style>
    html, body {
      height: 100%;
    }
    body {
      display: flex;
      flex-direction: column;
      margin: 0;
    }
    main {
      flex: 1; /* đẩy footer xuống đáy */
    }
  </style>
</head>
<body>
  <%- include("partials/header") %>
  <%- include("partials/navbar") %>

  <main class="container my-4">
    <%- body %>
  </main>

  <%- include("partials/footer") %>

  <script src="/js/cart.js"></script>

  <script>
    // Dropdown user ở header
    document.addEventListener("DOMContentLoaded", function () {
      const wrapper = document.getElementById("userDropdownWrapper");
      const toggle  = document.getElementById("userDropdownToggle");
      const menu    = document.getElementById("userDropdownMenu");

      if (wrapper && toggle && menu) {
        toggle.addEventListener("click", function (e) {
          e.preventDefault();
          e.stopPropagation();
          menu.classList.toggle("show");
        });

        document.addEventListener("click", function (e) {
          if (!wrapper.contains(e.target)) {
            menu.classList.remove("show");
          }
        });
      }
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Toggle show/hide password
    document.addEventListener("DOMContentLoaded", function () {
      document.querySelectorAll(".toggle-password").forEach(function (btn) {
        btn.addEventListener("click", function () {
          const targetSelector = btn.getAttribute("data-target");
          const input = document.querySelector(targetSelector);
          if (!input) return;

          const isPassword = input.getAttribute("type") === "password";
          input.setAttribute("type", isPassword ? "text" : "password");

          const icon = btn.querySelector("i");
          if (icon) {
            icon.classList.toggle("bi-eye");
            icon.classList.toggle("bi-eye-slash");
          }
        });
      });
    });
  </script>
</body>
</html>
